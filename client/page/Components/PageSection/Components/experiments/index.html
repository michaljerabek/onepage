<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>

    <link rel="stylesheet" href="../../../../../../public/css/page.css">
    <link rel="stylesheet" href="../BackgroundImage/styles.css">

    <style>

        .P_PageSection--content,
        .P_PageSection--background-color {
            height: 768px;
        }

    </style>

</head>
<body>

    <div id="App"></div>

    <script src="http://cdn.ractivejs.org/edge/ractive.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.12.2.min.js"></script>

    <script src="../../index.js"></script>
    <script src="../BackgroundImage/index.js"></script>

    <script id="Tpl" type="text/html">

        <PageSection section="{{.section1}}" />
        <PageSection section="{{.section2}}" />
        <PageSection section="{{.section3}}" />

    </script>

    <script>
        /*jslint indent: 4, white: true, nomen: true, regexp: true, unparam: true, node: true, browser: true, devel: true, nomen: true, plusplus: true, regexp: true, sloppy: true, vars: true*/
        /*global $, Ractive*/

        var app;

        $.when.apply($, [$.get("../../index.tpl"), $.get("../BackgroundImage/index.tpl")]).then(function (pageSection, backgroundImage) {

            app = new Ractive({
                el: "#App",
                template: "#Tpl",

                components: {
                    PageSection: window.PageSection.extend({
                        template: pageSection[0],

                        components: {
                            BackgroundImage: window.BackgroundImage.extend({
                                template: backgroundImage[0]
                            })
                        },

                        partials: {
                            pageSectionEditUI: "",
                            pageSectionContent: "<BackgroundImage data='{{.section.backgroundImage}}' />",
                            pageSectionSettings: ""
                        },

                        onconfig: function () {
                            this.superOnconfig();
                        },

                        onrender: function () {
                            this.superOnrender();
                        },

                        oncomplete: function () {
                            this.superOncomplete();
                        }
                    })
                },

                partials: {

                },

                data: {

                    section1: {
                        backgroundImage: {
                            backgroundImage: "http://lorempixel.com/1600/768/cats/3/",
                            backgroundSize: "cover",
                            backgroundRepeat: "no-repeat",

                            parallax: false
                        }
                    },

                    section2: {
                        backgroundImage: {
                            backgroundImage: "http://lorempixel.com/1600/768/cats/5/",
                            backgroundSize: "cover",
                            backgroundRepeat: "no-repeat",

                            parallax: false
                        }
                    },

                    section3: {
                        backgroundImage: {
                            backgroundImage: "http://lorempixel.com/1600/768/cats/8/",
                            backgroundSize: "cover",
                            backgroundRepeat: "no-repeat",

                            parallax: false
                        }
                    }

                }
            });

        });


    </script>

</body>
</html>
